window.onload=function(){function e(){var e="";return void 0!==window.getSelection?e=window.getSelection().toString():void 0!==document.selection&&"Text"==document.selection.type&&(e=document.selection.createRange().text),e}function t(){var t=e();t&&alert("Got selected text "+t)}var n=document.querySelector("input[name='product_imgs[]']");n&&(n.onchange=function(){var e=-1;if("undefined"!=typeof FileReader){var t=document.querySelector(".products__new__imgprev");t.innerHTML="";var i=/^([a-zA-Z0-9\s_\\.\-:])+(.jpg|.jpeg|.gif|.png|.bmp)$/,r=document.createElement("p");r.innerHTML="Select your main product image:";var a=document.createElement("span");a.innerHTML="(Main image will be displayed everywhere, the other images only on the product detail page!)",r.appendChild(a),t.appendChild(r);for(var o=0;o<n.files.length;o++){var l=n.files[o];if(!i.test(l.name.toLowerCase()))return alert(l.name+" is not a valid image file."),t.innerHTML="",!1;var d=new FileReader;d.onload=function(i){e++;var a=document.createElement("input"),o=document.createElement("label");a.setAttribute("type","radio"),a.setAttribute("name","img-select"),a.setAttribute("value","img-"+e),a.setAttribute("id","img-"+e);var l=document.createElement("i");l.setAttribute("class","img-check"),o.setAttribute("for","img-"+e),t.appendChild(a);var d=document.createElement("img");d.style.height="auto",d.style.width="100%",d.src=i.target.result,o.appendChild(d),o.appendChild(l),t.appendChild(o),document.querySelector("label[for='product_imgs']").classList.add("hovered"),n.files.length<=1?(document.querySelector(".upload-success").innerHTML=n.files.length+" image selected!",document.querySelector(".products__new__imgprev label").click(),t.removeChild(r)):document.querySelector(".upload-success").innerHTML=n.files.length+" image selected!"},d.readAsDataURL(l)}}else alert("This browser does not support HTML5 FileReader.")})};